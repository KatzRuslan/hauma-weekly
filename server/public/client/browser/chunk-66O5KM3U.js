import{a as Z}from"./chunk-G2SKXV7L.js";import{d as L}from"./chunk-VCWKP6TM.js";import{e as X,f as w}from"./chunk-5DINNPRL.js";import{a as Y}from"./chunk-LHF5IWA5.js";import"./chunk-43FPTEVV.js";import{k as J,n as K}from"./chunk-53EWOXEW.js";import{U as Q,X as j,ka as O,la as W,ta as q,ua as N,wa as U,xa as G,z as A}from"./chunk-DL4SJKHN.js";import{Ab as D,Bb as d,Cb as C,Dc as H,Fb as P,I as S,Ia as z,Ib as k,Oa as E,Sa as R,Ua as a,Wb as $,Xb as B,Ya as M,Zb as F,cb as c,ia as m,ib as I,ka as V,l as b,nb as r,ob as p,pa as h,pb as x,qa as y,tb as T,vb as u,wb as g}from"./chunk-6B4JMWCY.js";import{a as f,b as _}from"./chunk-CGT2X6C5.js";var ee=["table"];function te(n,o){if(n&1){let s=T();r(0,"div",6)(1,"div",7),x(2,"i",8),r(3,"input",9,10),u("input",function(){h(s);let e=D(4),i=g();return y(i.onSearchFilter(e.value))}),p()()()}}function ie(n,o){if(n&1){let s=T();r(0,"div",11)(1,"div",12)(2,"p-button",13),u("onClick",function(){h(s);let e=g();return y(e.onMessage(""))}),p()()()}n&2&&(a(2),c("rounded",!0)("rounded",!0)("plain",!0))}function ne(n,o){n&1&&(r(0,"tr"),x(1,"th",14),r(2,"th",6)(3,"div",6)(4,"span",6),d(5,"Type Name"),p()()(),r(6,"th",15)(7,"div",6)(8,"span",6),d(9,"Provides"),p()()()())}function oe(n,o){if(n&1){let s=T();r(0,"tr",16)(1,"td",14)(2,"p-button",17),u("onClick",function(){let i=h(s).$implicit,l=g();return y(l.onMessage("",i))}),p()(),r(3,"td",6)(4,"div",6)(5,"span",6),d(6),p()()(),r(7,"td",15)(8,"div",18)(9,"span",6),d(10),p()()()()}if(n&2){let s=o.$implicit;a(2),c("rounded",!0)("text",!0)("plain",!0),a(4),C(s.name),a(2),c("pTooltip",s.displayProvides),a(2),C(s.displayProvides)}}var ze=(()=>{let o=class o{constructor(){this._articleTypesSignal=R({articleTypes:[],searchText:""}),this._articleTypesEffect=M(()=>this.createTableValue(this._articleTypesSignal())),this._store$=m(A),this._utilsService=m(Z),this._elementRef=m(E),this._dialogService=m(w),this._subscriptions=[this._store$.select(L).subscribe(t=>this._articleTypesSignal.update(e=>_(f({},e),{articleTypes:t.map(i=>_(f({},i),{displayProvides:i.provides.filter(l=>l!=="<acting>").join(", ")}))})))],this.messageType={},this.tableValue=[]}onWindowResize(){this._onResize&&typeof this._onResize=="function"&&this._onResize()}createTableValue({articleTypes:t,searchText:e}){if(this.tableValue=e.length===0?t:t.filter(({name:i})=>`${i}`.toLowerCase().indexOf(e)>=0),!this._onResize){this._onResize=()=>{let l=this._elementRef.nativeElement.querySelector(".row");if(l){let{height:v}=l.getBoundingClientRect();this.table.virtualScrollItemSize=v}};let i=b([!0]).pipe(S(0)).subscribe(()=>{this._onResize(),i.unsubscribe()})}}onSearchFilter(t){this._articleTypesSignal.update(e=>_(f({},e),{searchText:`${t}`.toLowerCase()}))}onMessage(t,e){switch(t){default:this._store$.dispatch(j.showConfirmDialog({header:"Error",message:"Not implemented yet",accept:{label:"Close"}}));break}}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe())}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=V({type:o,selectors:[["app-types"]],viewQuery:function(e,i){if(e&1&&B(ee,5),e&2){let l;$(l=F())&&(i.table=l.first)}},hostAttrs:[1,"flex","flex-column","overflow-hidden","h-full","settings-page"],hostBindings:function(e,i){e&1&&u("resize",function(v){return i.onWindowResize(v)},!1,z)},standalone:!0,features:[P([w]),k],decls:6,vars:4,consts:[["scrollHeight","flex",1,"w-full","h-full",3,"value","scrollable","virtualScroll","virtualScrollItemSize"],["table",""],["pTemplate","caption"],["pTemplate","summary"],["pTemplate","header"],["pTemplate","body"],[1,""],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",1,"w-30rem",3,"input"],["searchInput",""],[1,"flex","justify-content-end"],[1,"px-2"],["icon","pi pi-plus text-xl","styleClass","w-3rem h-3rem","size","large",3,"rounded","plain","onClick"],[1,"w-3rem"],[1,"article-type-provides-cell"],[1,"row"],["icon","pi pi-pencil","styleClass","",3,"rounded","text","plain","onClick"],["appTooltip","","tooltipPosition","top",1,"white-space-nowrap","overflow-hidden","text-overflow-ellipsis",3,"pTooltip"]],template:function(e,i){e&1&&(r(0,"p-table",0,1),I(2,te,5,0,"ng-template",2)(3,ie,3,3,"ng-template",3)(4,ne,10,0,"ng-template",4)(5,oe,11,6,"ng-template",5),p()),e&2&&c("value",i.tableValue)("scrollable",!0)("virtualScroll",!0)("virtualScrollItemSize",0)},dependencies:[H,W,O,N,q,Q,G,U,K,J,X,Y],styles:[".article-type-provides-cell[_ngcontent-%COMP%]{max-width:32rem;min-width:32rem}"]});let n=o;return n})();export{ze as TypesComponent};
